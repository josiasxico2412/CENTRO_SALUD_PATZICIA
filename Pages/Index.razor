@page "/inicio"
@inject IJSRuntime js
@attribute [Authorize(Roles ="Admin")]
@inject NavigationManager Navigation
@inject AuthenticationStateProvider AuthStateProvider
<PageTitle>PAGINA PRINCIPAL</PageTitle>

		<body id="page-top">
			<!-- Navigation-->
			<nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
				<div class="container">
					<a class="navbar-brand" href="#page-top"><img src="/css/imagenes/logo.png" alt="..." /></a>
					<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
						Menu
						<i class="fas fa-bars ms-1"></i>
					</button>
					<div class="collapse navbar-collapse" id="navbarResponsive">
						<ul class="navbar-nav text-uppercase ms-auto py-4 py-lg-0">
					<li class="nav-item"><a class="nav-link" href="javascript:void(0)" @onclick="() => ScrollToPortfolio()">TAREAS A REALIZAR</a></li>
					<li class="nav-item"><a class="nav-link" href="javascript:void(0)" @onclick="() => ScrollToTeam()">EQUIPO</a></li>
							<li class="nav-item"><a class="nav-link" href="#" @onclick="Logout">SALIR</a></li>
						</ul>
					</div>
				</div>
			</nav>
			<!-- Masthead-->
			<header class="masthead">
				<div class="container">
					<div class="masthead-subheading">BIENVENIDA ESTIMADA <a href="#usuario"></a></div>
					<div class="masthead-heading text-uppercase">En un placer trabajar de forma digital</div>
			<a class="btn btn-primary btn-xl text-uppercase" href="javascript:void(0)" @onclick="() => ScrollToPortfolio()">Ir a las Tareas</a>
				</div>
			</header>
			<!-- Portfolio Grid-->
			<section class="page-section bg-light" id="portfolio">
				<div class="container">
					<div class="text-center">
						<h2 class="section-heading text-uppercase">REALIZAR ACCIÓN DESEADA</h2>
						<h3 class="section-subheading text-muted">BIENVENIDA DOCTORA EN ESTE APARTADO ENCONTRARÁ FUNCONES QUE PUEDE REALIZAR</h3>
					</div>
					<div class="row">
						<div class="col-lg-4 col-sm-6 mb-4">
							<!-- Portfolio item Realizar nuevo registro-->
							<div class="portfolio-item">
								<a class="portfolio-link" data-bs-toggle="modal" href="registros" onclick="window.location.href='/registros'">
									<div class="portfolio-hover">
										<div class="portfolio-hover-content"><i class="fas fa-plus fa-3x"></i></div>
									</div>
									<img class="img-fluid" src="css/imagenes/new.png" alt="..." />
								</a>
								<div class="portfolio-caption">
									<div class="portfolio-caption-heading">REALIZAR NUEVO</div>
									<div class="portfolio-caption-subheading text-muted">REGISTRO</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-sm-6 mb-4">
							<!-- Portfolio item Editar registro-->
							<div class="portfolio-item">
								<a class="portfolio-link" data-bs-toggle="modal" href="editar" onclick="window.location.href='/editar'">
									<div class="portfolio-hover">
										<div class="portfolio-hover-content"><i class="fas fa-plus fa-3x"></i></div>
									</div>
									<img class="img-fluid" src="css/imagenes/edit.png" alt="..." />
								</a>
								<div class="portfolio-caption">
									<div class="portfolio-caption-heading">EDITAR</div>
									<div class="portfolio-caption-subheading text-muted">REGISTRO</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-sm-6 mb-4">
							<!-- Portfolio item buscar registro-->
							<div class="portfolio-item">
								<a class="portfolio-link" data-bs-toggle="modal" href="buscar" onclick="window.location.href='/buscar'">
									<div class="portfolio-hover">
										<div class="portfolio-hover-content"><i class="fas fa-plus fa-3x"></i></div>
									</div>
									<img class="img-fluid" src="css/imagenes/search.png" alt="..." />
								</a>
								<div class="portfolio-caption">
									<div class="portfolio-caption-heading">VISUALIZAR</div>
									<div class="portfolio-caption-subheading text-muted">REGISTROS</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-sm-6 mb-4 mb-lg-0">
							<!-- Portfolio item Encabezado registro registro-->
							<div class="portfolio-item">
								<a class="portfolio-link" data-bs-toggle="modal" href="encabezado" onclick="window.location.href='/encabezado'">
									<div class="portfolio-hover">
										<div class="portfolio-hover-content"><i class="fas fa-plus fa-3x"></i></div>
									</div>
									<img class="img-fluid" src="css/imagenes/enca.png" alt="..." />
								</a>
								<div class="portfolio-caption">
									<div class="portfolio-caption-heading">ENCABEZADO</div>
									<div class="portfolio-caption-subheading text-muted">REGISTRO</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-sm-6 mb-4 mb-sm-0">
							<!-- Portfolio item ESTADISTICAS-->
							<div class="portfolio-item">
								<a class="portfolio-link" data-bs-toggle="modal" href="estadisticas" onclick="window.location.href='/estadisticas'">
									<div class="portfolio-hover">
										<div class="portfolio-hover-content"><i class="fas fa-plus fa-3x"></i></div>
									</div>
									<img class="img-fluid" src="/css/imagenes/estadistic.png" alt="..." />
								</a>
								<div class="portfolio-caption">
									<div class="portfolio-caption-heading">REVISAR</div>
									<div class="portfolio-caption-subheading text-muted">ESTADISTICAS</div>
								</div>
							</div>
						</div>
						<div class="col-lg-4 col-sm-6">
							<!-- Portfolio item Agendar citas-->
							<div class="portfolio-item">
								<a class="portfolio-link" data-bs-toggle="modal" href="citas" onclick="window.location.href='/citas'">
									<div class="portfolio-hover">
										<div class="portfolio-hover-content"><i class="fas fa-plus fa-3x"></i></div>
									</div>
									<img class="img-fluid" src="/css/imagenes/calendar.png" alt="..." />
								</a>
								<div class="portfolio-caption">
									<div class="portfolio-caption-heading">AGENDAR</div>
									<div class="portfolio-caption-subheading text-muted">CITAS DE CADA PACIENTE</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</section>
			<!-- Team-->
			<section class="page-section bg-light" id="team">
				<div class="container">
					<div class="text-center">
						<h2 class="section-heading text-uppercase">Directora General</h2>
						<h3 class="section-subheading text-muted">Encargada de la dirección del centro de Salud de Patzicia Chimaltentango</h3>
					</div>
					<div class="row">
						<div class="col-lg-12">
							<div class="team-member">
								<img class="mx-auto rounded-circle" src="css/imagenes/doc.png" alt="..." />
								<h4>Fernanda Argueta</h4>
								<p class="text-muted">Doctora General</p>
								<a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Diana Petersen Twitter Profile"><i class="fab fa-twitter"></i></a>
								<a class="btn btn-dark btn-social mx-2" href="https://www.facebook.com/centrodesalud.patzicia.3" target="_blank" aria-label="Diana Petersen Facebook Profile"><i class="fab fa-facebook-f"></i></a>
								<a class="btn btn-dark btn-social mx-2" href="#!" aria-label="Diana Petersen LinkedIn Profile"><i class="fab fa-linkedin-in"></i></a>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-lg-8 mx-auto text-center"><p class="large text-muted">Aplicación que unicamente podrán utilizar los usuarios autorizados por parte del centro de salud, que cuenten con acceso al servidor</p></div>
					</div>
				</div>
			</section>
			<!-- Footer-->
			<footer class="footer py-4">
				<div class="container">
					<div class="row align-items-center">
						<div class="col-lg-4 text-lg-start">Copyright &copy; Your Website 2024</div>
						<div class="col-lg-4 my-3 my-lg-0">
							<a class="btn btn-dark btn-social mx-2" href="https://www.linkedin.com/in/josias-xico-16268a279/" target="_blank" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
						</div>
						<div class="col-lg-4 text-lg-end">
							<a class="link-dark text-decoration-none me-3" href="#!">Privacy Policy</a>
							<a class="link-dark text-decoration-none" href="https://www.linkedin.com/in/josias-xico-16268a279/" target="_blank">Desarrollador-Josias Xico</a>
						</div>
					</div>
				</div>
			</footer>
			<!-- Bootstrap core JS-->
			<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
			<!-- Core theme JS-->
			<script src="js/scripts.js"></script>
			<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
			<!-- * *                               SB Forms JS                               * *-->
			<!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
			<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
			<script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
		</body>

<script>
	function scrollToSection(id) {
		var element = document.getElementById(id);
		if (element) {
			element.scrollIntoView({ behavior: 'smooth' });
		}
	}

	
</script>
	

@code {
	[CascadingParameter]
	private Task<AuthenticationState> authenticationState { get; set; }

	private async Task Logout()
	{
		if (AuthStateProvider is CustomAuthenticationStateProvider authProvider)
		{
			authProvider.Logout();
			await Task.Delay(100);  
			Navigation.NavigateTo("/", forceLoad: true);  
		}
	}
	private async Task CheckAuthenticationState()
	{
		var authState = await authenticationState;
		var user = authState.User;

		Console.WriteLine($"Usuario autenticado: {user.Identity?.IsAuthenticated}");
	}

	protected override async Task OnInitializedAsync()
	{
		try
		{
			var authState = await authenticationState;
			var user = authState;
		}
		catch (Exception)
		{


		}
	}

	private async Task ScrollToPortfolio()
	{
		await js.InvokeVoidAsync("scrollToSection", "portfolio");
	}
	private async Task ScrollToTeam()
	{
		await js.InvokeVoidAsync("scrollToSection", "team");
	}
}